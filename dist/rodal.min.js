"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_animationEvents=require("./animationEvents"),_animationEvents2=_interopRequireDefault(_animationEvents),_dialog=require("./dialog"),_dialog2=_interopRequireDefault(_dialog);require("./rodal.scss");var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Rodal=function(e){function t(){var e,n;_classCallCheck(this,t);for(var o,a=arguments.length,i=Array(a),r=0;a>r;r++)i[r]=arguments[r];return _possibleConstructorReturn(n,(o=n=_possibleConstructorReturn(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={isShow:!1,animationType:"leave"},o))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){this.animationEvents=(0,_animationEvents2["default"])(_reactDom2["default"].findDOMNode(this),this.transitionEnd.bind(this)),this.props.visible&&this.enter()}},{key:"componentWillUnmount",value:function(){this.animationEvents&&this.animationEvents.remove()}},{key:"componentWillReceiveProps",value:function(e){!this.props.visible&&e.visible?this.enter():this.props.visible&&!e.visible&&this.leave()}},{key:"enter",value:function(){this.setState({isShow:!0,animationType:"enter"})}},{key:"leave",value:function(){this.animationEvents?this.setState({animationType:"leave"}):this.setState({isShow:!1})}},{key:"transitionEnd",value:function(e){var t=_reactDom2["default"].findDOMNode(this);e&&e.target!==t||"leave"===this.state.animationType&&this.setState({isShow:!1})}},{key:"render",value:function(){var e=this.props,t=e.duration,n=e.showMask,o=e.onClose,a=e.children,i=this.state,r=i.isShow,s=i.animationType,l=n?_react2["default"].createElement("div",{className:"rodal-mask",onClick:o}):null,u={display:r?"block":"none",animationDuration:t+"ms",WebkitAnimationDuration:t+"ms"};return _react2["default"].createElement("div",{style:u,className:"rodal rodal-fade-"+s},l,_react2["default"].createElement(_dialog2["default"],_extends({},this.props,{animationType:s}),a))}}]),t}(_react2["default"].Component);Rodal.propTypes={visible:_react.PropTypes.bool,onClose:_react.PropTypes.func.isRequired,animation:_react.PropTypes.string,duration:_react.PropTypes.number,showMask:_react.PropTypes.bool,showCloseButton:_react.PropTypes.bool},Rodal.defaultProps={visible:!1,animation:"zoom",duration:300,showMask:!0,showCloseButton:!0},exports["default"]=Rodal;